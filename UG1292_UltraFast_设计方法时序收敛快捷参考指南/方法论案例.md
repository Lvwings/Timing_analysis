# 时序案例

https://forums.xilinx.com/t5/Design-and-Debug-Techniques-Blog/Using-the-Methodology-Report-Part-One-Timing-is-Met-But-Getting/ba-p/1154790

问题说明**：

在这种设计中，用户已经生成了比特流并对其进行了编程。在硬件中进行测试时，他们发现在少数几个时钟域中都无法获得所需的功能。

他们测试了行为仿真和实施后仿真，并在信号上找到了正确的结果。

他们也没有遇到任何类型的时序违规，并且所有值都是正值，如下设计时序摘要中所示。

![hemangd_0-1600955831829.png](https://forums.xilinx.com/t5/image/serverpage/image-id/83530iA2A260AF8C8CAF24/image-size/large?v=1.0&px=999)

**注意：** *您可以使用以下选项自己检查设计的时序摘要*：

- *在Vivado GUI中，转到**“报告”选项卡->“时间”->“报告时间摘要”***
- *运行以下Tcl命令：*

```
report_timing_summary-文件<文件路径> /timingreport.txt
```

 

**根本原因分析****：**

硬件功能问题背后可能有多种原因。其中包括缺少的时钟域交叉（CDC）同步器，次优时钟拓扑，时钟结构中的组合逻辑用法，元稳定性和经典的不受约束的路径。

要检查与时钟/体系结构/ CDC和其他相关的警告/严重警告，可以使用方法报告。

要在Vivado GUI中打开方法报告，请转到**报告选项卡->报告方法，**或在Tcl控制台中使用report_methodology。

报告打开后，您可能会看到一些与您的设计相关的警告和严重警告，您需要检查这些警告和严重警告。

在此示例中，报告中显示了一些与CDC相关的不良做法的警告（这些警告的ID为**Timing-9**和**Timing-10**），如下所示。

 

 

 



![pic3.png](https://forums.xilinx.com/t5/image/serverpage/image-id/83531iC2A403D2C9C25872/image-size/large?v=1.0&px=999)

这些警告表明该工具已通过诸如set_false_path或set_clock_groups之类的约束检测到两个时钟域之间的一个或多个异步Clock Domain Crossing。

但是，它在捕获时钟一侧未找到双寄存器逻辑同步器。结果，建议用户运行report_CDC并对这些CDC路径进行进一步分析。

要在Vivado GUI中打开CDC报告，请转到**“报告”选项卡->“时间”->“报告CDC”**。或者，您可以在Tcl控制台中运行report_cdc命令。

有关阅读此CDC报告的深入指南，请参阅[（UG906）](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug906-vivado-design-analysis.pdf#page=76)。

CDC报告显示，在相同时钟域中存在不安全，未知的CDC端点（如下所示），其中发生了错误的硬件功能。请参阅[（UG906）](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug906-vivado-design-analysis.pdf#page=76)以了解此报告的名称。

 



![pic4.png](https://forums.xilinx.com/t5/image/serverpage/image-id/83532i1098BCDC994FCF39/image-size/large?v=1.0&px=999)

 

**如何解决这些警告/严重警告****：**

1）[（UG906）](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug906-vivado-design-analysis.pdf#page=293)包含这些警告的详细说明以及其他计时方法检查。浏览其中的示例以详细了解每个警告及其根本原因。您可以通过添加适当的同步电路来相应地改进设计，可以通过修改RTL或使用XPM（Xilinx参数化宏）来实现。 

2）您可能还需要相应地添加或修改约束，或者在RTL源代码中为CDC端点添加ASYNC_REG属性。（您也可以参考[（UG906）](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug906-vivado-design-analysis.pdf#page=87)来深入了解CDC拓扑。）

3）对于伪静态寄存器接口，最好放弃而不是过度设计CDC接口。 

有关豁免及其创建方式的更多信息，请参见[（UG906）](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_1/ug906-vivado-design-analysis.pdf#page=166)。

**注意：** *伪静态CDC寄存器接口是CDC路径，实际上是静态配置寄存器。它们在初始化后可能永远不会改变，或者它们可能只改变一次，因此实际上可以认为它们是静态的。* 

 

**结论：**

对CDC路径进行必要的修改后，客户能够成功通过硬件上的功能测试。 

# 使用方法论相关文章

https://forums.xilinx.com/t5/Design-and-Debug-Techniques-Blog/bg-p/support_blog/label-name/using%20the%20methodology%20report